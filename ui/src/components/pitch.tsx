import React, { ReactNode } from 'react'

import { StatsbombEvent } from '../types/StatsbombEvent'
import { scale } from '../utils'
import { EventWrapper } from './events/wrapper'

interface PitchProps {
  children?: ReactNode | ReactNode[] | undefined;
  events: StatsbombEvent[];
}

export function Pitch({ events, children }: PitchProps) {
  // const [ ref, { loaded, xScale, yScale } ] = useScale([0, 120], [0, 80])

  const xScale = scale([0, 120], [ 0, 657 ])
  const yScale = scale([0, 80], [ 0, 492 ])

  const eventElements = events.map(event => <EventWrapper
    key={event.id}
    event={event}
    xScale={xScale}
    yScale={yScale}
  />)

  return (
    <svg width="726" height="530" version="1.1" xmlns="http://www.w3.org/2000/svg" className="pitch">
      <defs>
        <marker id="arrowhead" markerWidth="6" markerHeight="4"
          refX="6" refY="2" orient="auto">
          <polygon points="0 0, 10 3.5, 0 7" />
        </marker>
      </defs>

      <g id="parent" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
        <g id="Football_pitch" transform="translate(368.999970, 266.999940) rotate(-270.000000) translate(-368.999970, -266.999940) translate(102.000000, -102.000000)">
          <rect id="rect1317" fill="#009D00" transform="translate(266.999970, 368.999940) rotate(-90.000000) translate(-266.999970, -368.999940) " x="-101.99997" y="101.99997" width="737.99988" height="533.99994" rx="2.5634737"></rect>
          <g id="g4041" transform="translate(266.759324, 368.841911) rotate(-90.000000) translate(-266.759324, -368.841911) translate(-78.450313, 122.693099)" stroke="#FFFFFF" strokeOpacity="0.62921352">
            <polygon id="path2194" strokeWidth="2.26162525" points="16.304374 491.918464 16.304374 -2.14063078e-14 672.052748 1.02911753 673.083794 491.918464"></polygon>
            <path d="M394.786086,247.502806 C394.786086,274.588025 372.35912,296.544934 344.694057,296.544934 C317.028993,296.544934 294.602028,274.588025 294.602028,247.502806 C294.602028,229.981741 304.149515,213.79161 319.648042,205.031077 C335.14657,196.270545 354.241543,196.270545 369.740071,205.031077 C385.238599,213.79161 394.786086,229.981741 394.786086,247.502806 L394.786086,247.502806 Z" id="path2212" strokeWidth="2.26247303" strokeLinejoin="round"></path>
            <polyline id="path2196" strokeWidth="2.26162525" points="15.9579907 356.589433 107.229302 356.589433 107.229302 137.387263 16.4968226 137.387263 16.4968226 137.387263"></polyline>
            <polyline id="path2198" strokeWidth="2.26162525" points="16.6664828 195.017878 48.4593919 195.017878 47.4283461 295.871465 15.4657768 295.87145"></polyline>
            <polyline id="path2200" strokeWidth="2.26162525" points="16.4968226 225.891434 -4.28930207e-14 225.891434 -4.28930207e-14 266.027037 16.4968226 266.027022"></polyline>
            <path d="M107.059641,285.088983 C135.929073,268.365818 134.77494,223.172559 106.936584,206.706661" id="path2206" strokeWidth="2.26162525"></path>
            <polyline id="path3091" strokeWidth="2.26162525" points="672.738512 356.712275 583.189972 356.589449 583.189972 137.387278 672.322737 137.387278"></polyline>
            <polyline id="path3093" strokeWidth="2.26162525" points="672.891405 195.017893 641.959882 195.017893 642.990928 295.87148 672.738512 295.871465"></polyline>
            <polyline id="path3095" strokeWidth="2.26162525" points="672.445795 225.891449 690.419274 225.891449 690.419274 266.027052 672.814951 266.027037"></polyline>
            <path d="M582.990476,285.088998 C554.121044,268.365833 555.275162,223.786692 583.113518,207.320793" id="path3097" strokeWidth="2.26162525"></path>
            <polyline id="path3107" strokeWidth="2.26162525" points="345.209614 -2.14063078e-14 345.209614 490.889351 345.209614 490.889351"></polyline>
            <path d="M16.5399696,7.99142652 C16.5399696,7.99142652 22.636796,6.53986788 24.1470013,0.1753389" id="path3117" strokeWidth="2.26162525"></path>
            <path d="M23.6641141,492.297624 C23.6641141,492.297624 22.2098233,486.212241 15.8333488,484.704852" id="path3120" strokeWidth="2.26162525"></path>
            <path d="M672.72582,484.113555 C672.72582,484.113555 666.628994,485.56512 665.118788,491.929641" id="path3122" strokeWidth="2.26162525"></path>
            <path d="M663.530257,1.40317063 C663.530257,1.40317063 664.984548,7.48856821 671.361038,8.99594258" id="path3124" strokeWidth="2.26162525"></path>
            <path d="M615.024278,245.750804 C615.024278,246.870064 614.308061,247.777404 613.424564,247.777404 C612.541066,247.777404 611.82485,246.870064 611.82485,245.750804 C611.82485,244.631543 612.541066,243.724204 613.424564,243.724204 C614.308061,243.724204 615.024278,244.631543 615.024278,245.750804 L615.024278,245.750804 Z" id="path3126" strokeWidth="2.26162525" strokeLinejoin="round"></path>
            <path d="M78.8740601,245.566564 C78.8753971,246.269449 78.4535167,246.91945 77.7676475,247.271236 C77.0817783,247.623022 76.2363656,247.623022 75.5504965,247.271236 C74.8646273,246.91945 74.4427469,246.269449 74.4440839,245.566564 C74.4427469,244.863679 74.8646273,244.213677 75.5504965,243.861891 C76.2363656,243.510105 77.0817783,243.510105 77.7676475,243.861891 C78.4535167,244.213677 78.8753971,244.863679 78.8740601,245.566564 L78.8740601,245.566564 Z" id="path3128" strokeWidth="2.26162525" strokeLinejoin="round"></path>
            <path d="M346.240673,244.930107 C346.241868,245.666239 345.849096,246.346965 345.210588,246.715376 C344.572081,247.083787 343.785062,247.083787 343.146555,246.715376 C342.508047,246.346965 342.115275,245.666239 342.11647,244.930107 C342.115275,244.193975 342.508047,243.51325 343.146555,243.144838 C343.785062,242.776427 344.572081,242.776427 345.210588,243.144838 C345.849096,243.51325 346.241868,244.193975 346.240673,244.930107 Z" id="path3130" strokeWidth="2.26162525" strokeLinejoin="round"></path>
          </g>
        </g>
        <g className="events" transform="translate(39.000000, 20.000000)">
          <rect id="perimeter" opacity="0" x="1" y="1" width="657" height="492" fill="red" stroke="purple"></rect>
          {eventElements}
        </g>
      </g>
    </svg>
  )
}
